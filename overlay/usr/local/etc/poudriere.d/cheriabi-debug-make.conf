#
# This file should include cheriabi-make.conf followed by WITH_DEBUG=1.
#
# At the moment, there is no way to actually include that file and unfortunately
# it must be kept in sync.
#

# Use host binaries for the following tools. Note that these variables should be
# overwritten in /zdata/cheri/output/jail-morello-purecap/wrapper.
ADDR2LINE=	/zdata/cheri/output/jail-morello-purecap/addr2line
AR=		/zdata/cheri/output/jail-morello-purecap/ar
AS=		/zdata/cheri/output/jail-morello-purecap/as
CC=		/zdata/cheri/output/jail-morello-purecap/clang
CPP=		/zdata/cheri/output/jail-morello-purecap/clang-cpp
CPPFILT=	/zdata/cheri/output/jail-morello-purecap/c++filt
CXX=		/zdata/cheri/output/jail-morello-purecap/clang++
LD=		/zdata/cheri/output/jail-morello-purecap/ld
NM=		/zdata/cheri/output/jail-morello-purecap/nm
OBJCOPY=	/zdata/cheri/output/jail-morello-purecap/objcopy
OBJDUMP=	/zdata/cheri/output/jail-morello-purecap/objdump
RANLIB=		/zdata/cheri/output/jail-morello-purecap/ranlib
READELF=	/zdata/cheri/output/jail-morello-purecap/readelf
SIZE=		/zdata/cheri/output/jail-morello-purecap/size
STRINGS=	/zdata/cheri/output/jail-morello-purecap/strings
XCC=		/zdata/cheri/output/jail-morello-purecap/clang
XCPP=		/zdata/cheri/output/jail-morello-purecap/clang-cpp
XCXX=		/zdata/cheri/output/jail-morello-purecap/clang++

# Use llvm-ar from the SDK.
LLVM_AR=/zdata/cheri/output/jail-morello-purecap/ar
.export LLVM_AR

# Install hybrid ABI replacement packages for ports that aren't adapted for
# CheriABI yet but are required to build significant packages.
USE_PACKAGE_64_DEPENDS_ONLY=1

# Add host utilities to PATH.
PATH=/zdata/cheri/output/jail-morello-purecap:/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/sbin:/usr/local/bin
.export PATH

# Forcefully disable unsupported port options:
# * DOCS - textproc/py-docutils requires missing CheriABI Python;
# * MANPAGES - textproc/py-docutils requires missing CheriABI Python;
# * INFO - print/texlive is broken;
# * NLS - devel/gettext-tools is broken.
OPTIONS_UNSET_FORCE+=	DOCS MANPAGES INFO NLS

# Use txz instead of tzstd to compress packages.
# Zstandard is currently broken and we cannot use it for now.
PKG_COMPRESSION_FORMAT=txz

# Skip ports that are known to fail.
POUDRIERE_SKIP_FAILED=1

# Build ports with debug symbols and without optimizations.
WITH_DEBUG=1
